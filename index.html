<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turma do TIK TOK - Itaipava Macabra</title>
    <style>
        :root { --gold: #d4af37; --bg: #0a0b0d; --card: #15171c; --text: #e0e0e0; --danger: #ff4b2b; }
        body { font-family: 'Garamond', serif; background: var(--bg); color: var(--text); margin: 0; display: flex; justify-content: center; }
        #app { max-width: 650px; width: 100%; min-height: 100vh; padding: 30px; box-sizing: border-box; background: radial-gradient(circle at top, #1a1d23 0%, #0a0b0d 100%); border-left: 1px solid #222; border-right: 1px solid #222; }
        .header { text-align: center; border-bottom: 1px solid var(--gold); padding-bottom: 20px; margin-bottom: 30px; }
        .header h1 { font-size: 2.2rem; letter-spacing: 5px; color: var(--gold); margin: 0; text-shadow: 2px 2px 10px rgba(0,0,0,1); }
        .mission-card { background: var(--card); border: 1px solid #333; padding: 15px; border-radius: 8px; margin-bottom: 10px; cursor: pointer; transition: 0.3s; }
        .mission-card:hover { border-color: var(--gold); background: #1e2229; }
        .mission-card h4 { margin: 0; color: var(--gold); }
        .scene-box { background: rgba(0,0,0,0.5); border: 1px solid #333; padding: 25px; border-radius: 12px; margin-bottom: 25px; line-height: 1.7; font-size: 1.1rem; border-left: 5px solid var(--gold); }
        .btn-list { display: grid; gap: 12px; }
        .btn { background: #1c2128; border: 1px solid #444; color: var(--text); padding: 16px; text-align: left; cursor: pointer; border-radius: 4px; font-size: 1rem; font-family: inherit; }
        .btn:hover { background: #252a33; border-color: var(--gold); color: white; }
        .btn-accuse { margin-top: 30px; border: 2px solid var(--danger); color: var(--danger); background: rgba(255, 75, 43, 0.1); font-weight: bold; text-align: center; }
        .inventory { font-size: 0.8rem; color: var(--gold); background: #000; padding: 8px; border-radius: 4px; margin-bottom: 15px; letter-spacing: 1px; }
        .hidden { display: none; }
        b { color: var(--gold); }
    </style>
</head>
<body>

<div id="app">
    <div class="header">
        <h1>TURMA DO TIK TOK</h1>
        <small>MIST√âRIO NO RESORT ITAIPAVA</small>
    </div>

    <div id="screen-missions">
        <h3 style="text-align:center">Selecione um Arquivo de Caso:</h3>
        <div id="mission-list"></div>
    </div>

    <div id="screen-chars" class="hidden">
        <h3 id="selected-mission-title" style="text-align:center; color: var(--gold);"></h3>
        <p style="text-align:center">Quem ir√° liderar esta investiga√ß√£o?</p>
        <div id="char-grid" class="btn-list"></div>
    </div>

    <div id="screen-game" class="hidden">
        <div id="inv-display" class="inventory">INVENT√ÅRIO: Vazio</div>
        <div class="scene-box" id="scene-desc"></div>
        <div id="choices" class="btn-list"></div>
        <button class="btn btn-accuse" onclick="showAccuse()">[ ! ] FORMULAR ACUSA√á√ÉO FINAL</button>
    </div>

    <div id="screen-accuse" class="hidden">
        <h2 style="color: var(--danger); text-align:center">O VEREDITO FINAL</h2>
        <div id="accuse-grid" class="btn-list"></div>
        <button class="btn" style="margin-top:20px; width:100%; text-align:center" onclick="backToGame()">Retornar √† Investiga√ß√£o</button>
    </div>
</div>

<script>
    const amigos = ["Thamiris", "Eduardo", "Marcos", "Elyel", "Julia", "Thais", "Alice", "Andre", "Bruna", "Thiago"];
    
    const missoes = [
        { id: 1, t: "O Brinde Envenenado", d: "Uma ta√ßa de vinho car√≠ssima desapareceu, e logo depois, um dos amigos sumiu da mesa de jantar." },
        { id: 2, t: "O Eco do Penhasco", d: "Gritos foram ouvidos perto do mirante. No local, apenas um cachecol e uma fofoca sobre trai√ß√£o." },
        { id: 3, t: "Cofre de Segredos", d: "O cofre central do resort foi aberto. Algu√©m roubou os di√°rios e espalhou os prints na recep√ß√£o." },
        { id: 4, t: "N√©voa na Piscina", d: "A √°rea t√©rmica foi evacuada ap√≥s algu√©m sumir no vapor. Restou apenas um par de sapatos e um boato de heran√ßa." },
        { id: 5, t: "A √öltima Trilha", d: "Um passeio noturno pela mata terminou com um desaparecido e marcas de luta perto dos pinheiros." },
        { id: 6, t: "Vingan√ßa na Adega", d: "O som de vidros quebrados atraiu todos √† adega, mas a porta foi trancada por fora com algu√©m l√° dentro." },
        { id: 7, t: "Sombras no Banquete", d: "As luzes apagaram durante o prato principal. Quando voltaram, a cadeira da ponta estava vazia." },
        { id: 8, t: "O C√≥digo do Elevador", d: "Algu√©m hackeou o sistema do resort e isolou um dos nossos amigos no andar de manuten√ß√£o." },
        { id: 9, t: "A Mensagem de Sangue", d: "Uma mensagem no espelho do banheiro indicava que o fofoqueiro agiria √† meia-noite." },
        { id: 10, t: "O Desaparecido da Su√≠te 303", d: "A su√≠te presidencial est√° aberta, as malas prontas, mas o dono do quarto evaporou." }
    ];

    let gameState = {
        missao: null, player: "", sumiu: "", culpado: "", inv: [], local: "Hall"
    };

    const mapa = {
        "Hall": {
            desc: "O Hall do Resort √© imenso, com tapetes persas e um cheiro suave de lavanda. A lareira crepita, mas o sil√™ncio entre os presentes √© ensurdecedor.",
            links: [
                { t: "Conversar com os presentes no sof√°", acao: "pista", pID: "hall_p" },
                { t: "Ir para o Restaurante de Luxo", loc: "Restaurante" },
                { t: "Descer para a Adega Subterr√¢nea", loc: "Adega" },
                { t: "Sair para o Jardim de Inverno", loc: "Jardim" }
            ]
        },
        "Restaurante": {
            desc: "Mesas postas para um banquete que ningu√©m quer comer. H√° cristais quebrados no ch√£o e um clima de paranoia absoluta.",
            links: [
                { t: "Procurar por pistas sob as mesas", acao: "item", item: "Chave Mestra" },
                { t: "Interrogar o gar√ßom sobre a fofoca", acao: "pista", pID: "rest_p" },
                { t: "Voltar ao Hall", loc: "Hall" }
            ]
        },
        "Adega": {
            desc: "Um labirinto de garrafas e sombras. A temperatura caiu drasticamente aqui. A porta de carvalho parece ter sido for√ßada.",
            links: [
                { t: "Vasculhar os vinhos mais caros", acao: "pista", pID: "adega_p" },
                { t: "Tentar abrir a porta secreta (Requer Chave)", loc: "Passagem" },
                { t: "Subir para o Hall", loc: "Hall" }
            ]
        },
        "Jardim": {
            desc: "A neblina de Itaipava entrou pelo port√£o aberto. As rosas parecem negras sob o luar. H√° pegadas frescas na terra √∫mida.",
            links: [
                { t: "Seguir as pegadas at√© a floresta", loc: "Floresta" },
                { t: "Procurar algo entre os arbustos", acao: "item", item: "Lanterna T√°tica" },
                { t: "Voltar ao calor do Hall", loc: "Hall" }
            ]
        },
        "Passagem": {
            desc: "Um corredor estreito e √∫mido atr√°s da adega. Aqui voc√™ encontra as roupas de quem sumiu, jogadas de qualquer jeito.",
            links: [
                { t: "Analisar as roupas descartadas", acao: "pista", pID: "pass_p" },
                { t: "Voltar √† Adega", loc: "Adega" }
            ]
        },
        "Floresta": {
            desc: "O uivo do vento nas montanhas bloqueia qualquer outro som. Sem luz, este lugar √© um t√∫mulo de pinheiros.",
            links: [
                { t: "Usar Lanterna para iluminar o abismo", acao: "pista", pID: "flor_p" },
                { t: "Voltar ao Jardim", loc: "Jardim" }
            ]
        }
    };

    function setup() {
        const mList = document.getElementById('mission-list');
        missoes.forEach(m => {
            let div = document.createElement('div');
            div.className = 'mission-card';
            div.innerHTML = `<h4>M¬π ${m.id}: ${m.t}</h4><small>${m.d}</small>`;
            div.onclick = () => selectMission(m);
            mList.appendChild(div);
        });
    }

    function selectMission(m) {
        gameState.missao = m;
        document.getElementById('screen-missions').classList.add('hidden');
        document.getElementById('screen-chars').classList.remove('hidden');
        document.getElementById('selected-mission-title').innerText = m.t;
        
        const grid = document.getElementById('char-grid');
        grid.innerHTML = "";
        amigos.forEach(a => {
            let b = document.createElement('button');
            b.className = 'btn';
            b.innerText = `Investigar como ${a}`;
            b.onclick = () => start(a);
            grid.appendChild(b);
        });
    }

    function start(p) {
        gameState.player = p;
        let resto = amigos.filter(x => x !== p);
        gameState.sumiu = resto[Math.floor(Math.random() * resto.length)];
        gameState.culpado = resto[Math.floor(Math.random() * resto.length)];
        
        document.getElementById('screen-chars').classList.add('hidden');
        document.getElementById('screen-game').classList.remove('hidden');
        renderRoom("Hall");
    }

    function renderRoom(locKey) {
        if(locKey === "Passagem" && !gameState.inv.includes("Chave Mestra")) {
            alert("A porta secreta est√° trancada. Voc√™ precisa de uma Chave Mestra!");
            return;
        }
        if(locKey === "Floresta" && !gameState.inv.includes("Lanterna T√°tica")) {
            alert("Est√° escuro demais! Voc√™ se perderia na mata de Itaipava sem uma lanterna.");
            return;
        }

        const rm = mapa[locKey];
        document.getElementById('scene-desc').innerHTML = `<b>${locKey.toUpperCase()}</b><br><br>${rm.desc.replace("sumiu", "<b>" + gameState.sumiu + "</b>")}`;
        
        const ctn = document.getElementById('choices');
        ctn.innerHTML = "";
        rm.links.forEach(l => {
            let b = document.createElement('button');
            b.className = 'btn';
            b.innerText = `> ${l.t}`;
            b.onclick = () => {
                if(l.acao === "pista") getClue(l.pID);
                else if(l.acao === "item") getItem(l.item);
                else renderRoom(l.loc);
            };
            ctn.appendChild(b);
        });
    }

    function getItem(it) {
        if(!gameState.inv.includes(it)) {
            gameState.inv.push(it);
            document.getElementById('inv-display').innerText = "INVENT√ÅRIO: " + gameState.inv.join(" | ");
            alert("Voc√™ encontrou: " + it);
        } else {
            alert("Voc√™ j√° vasculhou este local.");
        }
    }

    function getClue(id) {
        let text = "";
        if(id === "hall_p") text = `Algu√©m sussurra: "Eu vi <b>${gameState.culpado}</b> mexendo no celular da v√≠tima pouco antes das luzes piscarem..."`;
        if(id === "rest_p") text = `O gar√ßom entrega um guardanapo: "O(A) <b>${gameState.culpado}</b> pediu para entregar isso para o(a) ${gameState.sumiu}, parecia uma amea√ßa."`;
        if(id === "adega_p") text = `Nas prateleiras de vinho, voc√™ encontra um brinco. √â do(a) <b>${gameState.culpado}</b>. O que ele(a) fazia aqui sozinho(a)?`;
        if(id === "pass_p") text = `Oculto nas roupas, h√° um print impresso. A fofoca veio do usu√°rio de <b>${gameState.culpado}</b>. Sem d√∫vidas.`;
        if(id === "flor_p") text = `A luz da lanterna revela: pegadas de <b>${gameState.culpado}</b> levam direto ao cativeiro onde ${gameState.sumiu} est√° escondido(a)!`;

        document.getElementById('scene-desc').innerHTML = `üé≠ <b>EVID√äNCIA ENCONTRADA:</b><br><br>${text}`;
        document.getElementById('choices').innerHTML = `<button class="btn" onclick="renderRoom('Hall')">Retornar ao Centro do Resort</button>`;
    }

    function showAccuse() {
        document.getElementById('screen-game').classList.add('hidden');
        document.getElementById('screen-accuse').classList.remove('hidden');
        const grid = document.getElementById('accuse-grid');
        grid.innerHTML = "";
        amigos.forEach(a => {
            if(a !== gameState.player) {
                let b = document.createElement('button');
                b.className = 'btn';
                b.innerText = `O CULPADO √â: ${a}`;
                b.onclick = () => final(a === gameState.culpado, a);
                grid.appendChild(b);
            }
        });
    }

    function final(win, nome) {
        document.getElementById('screen-accuse').classList.add('hidden');
        document.getElementById('screen-game').classList.remove('hidden');
        if(win) {
            document.getElementById('scene-desc').innerHTML = `‚ú® <b>CASO ENCERRADO!</b><br><br>Voc√™ confrontou <b>${nome}</b> diante de todos. Em choque, ele(a) confessou que a inveja o(a) levou a espalhar a fofoca e ocultar o(a) ${gameState.sumiu}. Itaipava agora dorme em paz.`;
        } else {
            document.getElementById('scene-desc').innerHTML = `ü•Ä <b>TR√ÅGICO ERRO...</b><br><br>Voc√™ apontou o dedo para ${nome}, mas <b>${gameState.culpado}</b> era o verdadeiro mestre por tr√°s das sombras. Voc√™ perdeu sua credibilidade e o culpado escapou na neblina.`;
        }
        document.getElementById('choices').innerHTML = `<button class="btn" onclick="location.reload()">Iniciar Nova Investiga√ß√£o</button>`;
        document.querySelector('.btn-accuse').style.display = 'none';
    }

    function backToGame() {
        document.getElementById('screen-accuse').classList.add('hidden');
        document.getElementById('screen-game').classList.remove('hidden');
    }

    setup();
</script>
</body>
</html>
